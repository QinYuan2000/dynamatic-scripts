Digraph G {
  splines=spline;
  compound=true; // Allow edges between clusters
  // Units/Channels in BB 0
  subgraph "cluster0" {
    label="block0"
    // Units from function arguments
    "a" [mlir_op="handshake.func", shape=diamond, label="a", style="solid", ]
    "b" [mlir_op="handshake.func", shape=diamond, label="b", style="solid", ]
    "start" [mlir_op="handshake.func", shape=diamond, label="start", style="dotted", ]
    // Units in BB 0
    "fork0" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled, dotted", ]
    "constant2" [mlir_op="handshake.constant", label="false", fillcolor=plum, shape="box", style="filled", ]
    "extsi0" [mlir_op="arith.extsi", label="[1...32]", fillcolor=moccasin, shape="oval", style="filled", ]
    "constant5" [mlir_op="handshake.constant", label="1", fillcolor=plum, shape="box", style="filled", ]
    "mc_load0" [mlir_op="handshake.mc_load", label="LD (y)", fillcolor=coral, shape="box", style="filled", ]
    "extsi5" [mlir_op="arith.extsi", label="[2...11]", fillcolor=moccasin, shape="oval", style="filled", ]
    // Channels from function arguments
    "a" -> "mux2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "b" -> "mux3" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "start" -> "fork0" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    // Channels in BB 0
    "fork0" -> "constant5" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork0" -> "constant2" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "constant2" -> "extsi0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "extsi0" -> "mc_load0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "constant5" -> "extsi5" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  }
  // Units/Channels in BB 1
  subgraph "cluster1" {
    label="block1"
    // Units in BB 1
    "mux4" [mlir_op="handshake.mux", label="mux", fillcolor=lightblue, shape="box", style="filled", ]
    "fork1" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "extsi6" [mlir_op="arith.extsi", label="[11...12]", fillcolor=moccasin, shape="oval", style="filled", ]
    "extsi7" [mlir_op="arith.extsi", label="[11...32]", fillcolor=moccasin, shape="oval", style="filled", ]
    "fork2" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "mux1" [mlir_op="handshake.mux", label="mux", fillcolor=lightblue, shape="box", style="filled", ]
    "mux2" [mlir_op="handshake.mux", label="mux", fillcolor=lightblue, shape="box", style="filled", ]
    "fork3" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "mux3" [mlir_op="handshake.mux", label="mux", fillcolor=lightblue, shape="box", style="filled", ]
    "tehb2" [mlir_op="handshake.tehb", label="tehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "fork4" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "control_merge2" [mlir_op="handshake.control_merge", label="cmerge", fillcolor=lightblue, shape="box", style="filled, dotted", ]
    "fork5" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "fork6" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled, dotted", ]
    "constant6" [mlir_op="handshake.constant", label="1", fillcolor=plum, shape="box", style="filled", ]
    "extsi2" [mlir_op="arith.extsi", label="[2...32]", fillcolor=moccasin, shape="oval", style="filled", ]
    "source0" [mlir_op="handshake.source", label="source", fillcolor=gainsboro, shape="box", style="filled, dotted", ]
    "constant7" [mlir_op="handshake.constant", label="1000", fillcolor=plum, shape="box", style="filled", ]
    "extsi8" [mlir_op="arith.extsi", label="[11...12]", fillcolor=moccasin, shape="oval", style="filled", ]
    "source1" [mlir_op="handshake.source", label="source", fillcolor=gainsboro, shape="box", style="filled, dotted", ]
    "constant8" [mlir_op="handshake.constant", label="1", fillcolor=plum, shape="box", style="filled", ]
    "extsi9" [mlir_op="arith.extsi", label="[2...12]", fillcolor=moccasin, shape="oval", style="filled", ]
    "muli0" [mlir_op="arith.muli", label="*", fillcolor=moccasin, shape="oval", style="filled", ]
    "mc_load1" [mlir_op="handshake.mc_load", label="LD (x)", fillcolor=coral, shape="box", style="filled", ]
    "muli1" [mlir_op="arith.muli", label="*", fillcolor=moccasin, shape="oval", style="filled", ]
    "oehb3" [mlir_op="handshake.oehb", label="oehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "addi0" [mlir_op="arith.addi", label="+", fillcolor=moccasin, shape="oval", style="filled", ]
    "fork7" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "tehb0" [mlir_op="handshake.tehb", label="tehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "mc_store0" [mlir_op="handshake.mc_store", label="ST (y)", fillcolor=coral, shape="box", style="filled", ]
    "addi2" [mlir_op="arith.addi", label="+", fillcolor=moccasin, shape="oval", style="filled", ]
    "oehb4" [mlir_op="handshake.oehb", label="oehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "tehb4" [mlir_op="handshake.tehb", label="tehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "fork8" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "trunci0" [mlir_op="arith.trunci", label="[12...11]", fillcolor=moccasin, shape="oval", style="filled", ]
    "cmpi1" [mlir_op="arith.cmpi<", label="<", fillcolor=moccasin, shape="oval", style="filled", ]
    "fork9" [mlir_op="handshake.fork", label="fork", fillcolor=lavender, shape="box", style="filled", ]
    "cond_br0" [mlir_op="handshake.cond_br", label="cbranch", fillcolor=tan2, shape="box", style="filled", ]
    "cond_br2" [mlir_op="handshake.cond_br", label="cbranch", fillcolor=tan2, shape="box", style="filled", ]
    "oehb0" [mlir_op="handshake.oehb", label="oehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "tehb1" [mlir_op="handshake.tehb", label="tehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "cond_br3" [mlir_op="handshake.cond_br", label="cbranch", fillcolor=tan2, shape="box", style="filled", ]
    "oehb1" [mlir_op="handshake.oehb", label="oehb [1]", fillcolor=lightgreen, shape="box", style="filled", ]
    "cond_br4" [mlir_op="handshake.cond_br", label="cbranch", fillcolor=tan2, shape="box", style="filled", ]
    "oehb2" [mlir_op="handshake.oehb", label="oehb [1]", fillcolor=lightgreen, shape="box", style="filled, dotted", ]
    "tehb3" [mlir_op="handshake.tehb", label="tehb [1]", fillcolor=lightgreen, shape="box", style="filled, dotted", ]
    "cond_br5" [mlir_op="handshake.cond_br", label="cbranch", fillcolor=tan2, shape="box", style="filled, dotted", ]
    // Channels in BB 1
    "mux4" -> "fork1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork1" -> "extsi6" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork1" -> "extsi7" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "extsi6" -> "addi2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "extsi7" -> "fork2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork2" -> "mc_load1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork2" -> "tehb0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "mux1" -> "muli0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "mux2" -> "fork3" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork3" -> "oehb0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork3" -> "muli0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "mux3" -> "tehb2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "tehb2" -> "fork4" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork4" -> "oehb1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork4" -> "muli1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "control_merge2" -> "fork6" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "control_merge2" -> "fork5" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork5" -> "mux4" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork5" -> "mux3" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork5" -> "mux2" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork5" -> "mux1" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork6" -> "constant6" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork6" -> "oehb2" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "constant6" -> "extsi2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "source0" -> "constant7" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "constant7" -> "extsi8" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "extsi8" -> "cmpi1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "source1" -> "constant8" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "constant8" -> "extsi9" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "extsi9" -> "addi2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "muli0" -> "oehb3" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "mc_load1" -> "muli1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "muli1" -> "addi0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "oehb3" -> "addi0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "addi0" -> "fork7" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork7" -> "cond_br2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork7" -> "mc_store0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "tehb0" -> "mc_store0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "addi2" -> "oehb4" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "oehb4" -> "tehb4" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "tehb4" -> "fork8" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork8" -> "trunci0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork8" -> "cmpi1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "trunci0" -> "cond_br0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "cmpi1" -> "fork9" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "fork9" -> "cond_br0" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork9" -> "cond_br2" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork9" -> "cond_br3" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork9" -> "cond_br4" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "fork9" -> "cond_br5" [style="solid", dir="both", arrowtail="none", arrowhead="dot", ]
    "cond_br0" -> "mux4" [style="solid", dir="both", arrowtail="none", arrowhead="normal",  color="blue"]
    "cond_br2" -> "mux1" [style="solid", dir="both", arrowtail="none", arrowhead="normal",  color="blue"]
    "oehb0" -> "tehb1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "tehb1" -> "cond_br3" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "cond_br3" -> "mux2" [style="solid", dir="both", arrowtail="none", arrowhead="normal",  color="blue"]
    "oehb1" -> "cond_br4" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
    "cond_br4" -> "mux3" [style="solid", dir="both", arrowtail="none", arrowhead="normal",  color="blue"]
    "oehb2" -> "tehb3" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "tehb3" -> "cond_br5" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
    "cond_br5" -> "control_merge2" [style="dotted", dir="both", arrowtail="none", arrowhead="normal",  color="blue"]
  }
  // Units/Channels in BB 2
  subgraph "cluster2" {
    label="block2"
    // Units in BB 2
    "return1" [mlir_op="handshake.return", label="return", fillcolor=gold, shape="box", style="filled", ]
    "end0" [mlir_op="handshake.end", label="end", fillcolor=gold, shape="box", style="filled", ]
    // Channels in BB 2
    "return1" -> "end0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  }
  // Units outside of all basic blocks
  "mem_controller0" [mlir_op="handshake.mem_controller", label="MC (x)", fillcolor=coral, shape="box", style="filled", ]
  "mem_controller1" [mlir_op="handshake.mem_controller", label="MC (y)", fillcolor=coral, shape="box", style="filled", ]
  "sink0" [mlir_op="handshake.sink", label="sink", fillcolor=gainsboro, shape="box", style="filled", ]
  "sink1" [mlir_op="handshake.sink", label="sink", fillcolor=gainsboro, shape="box", style="filled", ]
  "sink2" [mlir_op="handshake.sink", label="sink", fillcolor=gainsboro, shape="box", style="filled", ]
  "sink3" [mlir_op="handshake.sink", label="sink", fillcolor=gainsboro, shape="box", style="filled, dotted", ]
  // Channels outgoing of BB 0
  "fork0" -> "control_merge2" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
  "mc_load0" -> "mem_controller1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mc_load0" -> "mux1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "extsi5" -> "mux4" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  // Channels outgoing of BB 1
  "extsi2" -> "mem_controller1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mc_load1" -> "mem_controller0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mc_store0" -> "mem_controller1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mc_store0" -> "mem_controller1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "cond_br0" -> "sink0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "cond_br2" -> "return1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "cond_br3" -> "sink1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "cond_br4" -> "sink2" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "cond_br5" -> "sink3" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
  // Channels outside of all basic blocks
  "mem_controller0" -> "mc_load1" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mem_controller0" -> "end0" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
  "mem_controller1" -> "mc_load0" [style="solid", dir="both", arrowtail="none", arrowhead="normal", ]
  "mem_controller1" -> "end0" [style="dotted", dir="both", arrowtail="none", arrowhead="normal", ]
}
